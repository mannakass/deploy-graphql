{"ast":null,"code":"import{React,useRef,useEffect}from'react';import*as d3 from'd3';import{jsx as _jsx}from\"react/jsx-runtime\";function XPGraph(_ref){var increaseXP=_ref.increaseXP,filterAudits=_ref.filterAudits;var totalXP=0;filterAudits.map(function(project){return totalXP+=project.amount;});var myRef=useRef();myRef.current=increaseXP;console.log(myRef.current);var svgRef=useRef();useEffect(function(){// setting up svg\nvar width=1000;var height=600;var defined;var margin={top:50,bottom:50,left:50,right:50};var Y=d3.map(myRef.current,function(d){return d.amount;});var X=d3.map(myRef.current,function(d){return d.createdAt;});console.log(Y);var svg=d3.select(svgRef.current).attr('height',height-margin.top-margin.bottom).attr('width',width-margin.left-margin.right).attr('viewBox',[0,0,width,height]);// setting up the scaling\nvar xScale=d3.scaleUtc().domain(d3.extent(X)).range([margin.left,width-margin.right]);var yScale=d3.scaleLinear().domain([0,totalXP]).range([height-margin.bottom,margin.top]);var scaleLine=d3.line().x(function(d,i){return xScale(X[i]);}).y(yScale).curve(d3.curveCardinal);svg.selectAll('.line').data([Y]).join('path').attr('d',function(d){return scaleLine(d);}).attr('fill','none').attr('stroke','black');function yAxis(g){g.attr('transform',\"translate(\".concat(margin.left,\", 0)\"));g.call(d3.axisLeft(yScale));}function xAxis(g){g.attr('transform',\"translate(0, \".concat(height-margin.bottom,\")\")).call(d3.axisBottom(xScale).ticks(width/80).tickSizeOuter(0));}svg.append('g').call(yAxis);svg.append('g').call(xAxis);},myRef.current);return/*#__PURE__*/_jsx(\"div\",{className:\"line-chart\",children:/*#__PURE__*/_jsx(\"svg\",{ref:svgRef})});}export default XPGraph;","map":{"version":3,"names":["React","useRef","useEffect","d3","XPGraph","increaseXP","filterAudits","totalXP","map","project","amount","myRef","current","console","log","svgRef","width","height","defined","margin","top","bottom","left","right","Y","d","X","createdAt","svg","select","attr","xScale","scaleUtc","domain","extent","range","yScale","scaleLinear","scaleLine","line","x","i","y","curve","curveCardinal","selectAll","data","join","yAxis","g","call","axisLeft","xAxis","axisBottom","ticks","tickSizeOuter","append"],"sources":["/home/mannakass/kood/graphql/src/components/XPGraph.js"],"sourcesContent":["import { React, useRef, useEffect } from 'react';\nimport * as d3 from 'd3'\n\nfunction XPGraph({ increaseXP, filterAudits }) {\n\n    let totalXP = 0;\n    filterAudits.map(project => totalXP += project.amount)\n\n\n    let myRef = useRef()\n    myRef.current = increaseXP;\n    console.log(myRef.current)\n\n    const svgRef = useRef()\n    useEffect(() => {\n        // setting up svg\n        const width = 1000;\n        const height = 600;\n        let defined\n        const margin = { top: 50, bottom: 50, left: 50, right: 50 }\n        const Y = d3.map(myRef.current, d => d.amount);\n        const X = d3.map(myRef.current, d => d.createdAt)\n        console.log(Y)\n\n\n        const svg = d3.select(svgRef.current)\n            .attr('height', height - margin.top - margin.bottom)\n            .attr('width', width - margin.left - margin.right)\n            .attr('viewBox', [0, 0, width, height])\n\n        // setting up the scaling\n        const xScale = d3.scaleUtc()\n            .domain(d3.extent(X))\n            .range([margin.left, width - margin.right])\n\n        const yScale = d3.scaleLinear()\n            .domain([0, totalXP])\n            .range([height - margin.bottom, margin.top])\n\n\n\n        const scaleLine = d3.line()\n            .x((d, i) => xScale(X[i]))\n            .y(yScale)\n            .curve(d3.curveCardinal)\n\n        svg\n            .selectAll('.line')\n            .data([Y])\n            .join('path')\n            .attr('d', d => scaleLine(d))\n            .attr('fill', 'none')\n            .attr('stroke', 'black')\n\n        function yAxis(g) {\n            g.attr('transform', `translate(${margin.left}, 0)`)\n            g.call(d3.axisLeft(yScale))\n        }\n\n        function xAxis(g) {\n            g.attr('transform', `translate(0, ${height - margin.bottom})`)\n                .call(d3.axisBottom(xScale).ticks(width / 80).tickSizeOuter(0))\n        }\n\n        svg.append('g').call(yAxis)\n        svg.append('g').call(xAxis)\n\n\n    }, myRef.current)\n\n\n    return (\n        <div className='line-chart'>\n            <svg ref={svgRef}></svg>\n        </div>\n    )\n}\n\nexport default XPGraph\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}