{"ast":null,"code":"import{React,useRef,useEffect}from'react';import*as d3 from'd3';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function XPGraph(_ref){var increaseXP=_ref.increaseXP,filterAudits=_ref.filterAudits;var totalXP=0;filterAudits.map(function(project){return totalXP+=project.amount;});var XPRef=useRef();XPRef.current=increaseXP;var svgRef=useRef();useEffect(function(){// setting up svg\nvar width=1000;var height=600;var margin={top:50,bottom:50,left:50,right:50};var Y=d3.map(XPRef.current,function(d){return d.amount;});var X=d3.map(XPRef.current,function(d){return d.createdAt;});var svg=d3.select(svgRef.current).attr('height',height-margin.top-margin.bottom).attr('width',width-margin.left-margin.right).attr('viewBox',[0,0,width,height]);var xScale=d3.scaleUtc().domain(d3.extent(X)).range([margin.left,width-margin.right]);var yScale=d3.scaleLinear().domain([0,totalXP]).range([height-margin.bottom,margin.top]);var scaleLine=d3.line().x(function(d,i){return xScale(X[i]);}).y(yScale).curve(d3.curveLinear);svg.selectAll('.line').data([Y]).join('path').attr('d',function(d){return scaleLine(d);}).attr('fill','none').attr('stroke','#A7727D');function yAxis(g){g.attr('transform',\"translate(\".concat(margin.left,\", 0)\"));g.call(d3.axisLeft(yScale));}function xAxis(g){g.attr('transform',\"translate(0, \".concat(height-margin.bottom,\")\")).call(d3.axisBottom(xScale).ticks(width/80).tickSizeOuter(0));}svg.append('g').call(yAxis);svg.append('g').call(xAxis);},XPRef.current);return/*#__PURE__*/_jsxs(\"div\",{className:\"line-graph\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"line-graph-title\",children:\"XP progression over time\"}),/*#__PURE__*/_jsx(\"svg\",{ref:svgRef})]});}export default XPGraph;","map":{"version":3,"names":["React","useRef","useEffect","d3","XPGraph","increaseXP","filterAudits","totalXP","map","project","amount","XPRef","current","svgRef","width","height","margin","top","bottom","left","right","Y","d","X","createdAt","svg","select","attr","xScale","scaleUtc","domain","extent","range","yScale","scaleLinear","scaleLine","line","x","i","y","curve","curveLinear","selectAll","data","join","yAxis","g","call","axisLeft","xAxis","axisBottom","ticks","tickSizeOuter","append"],"sources":["/home/mannakass/kood/graphql/src/components/LineGraph.js"],"sourcesContent":["import { React, useRef, useEffect } from 'react';\nimport * as d3 from 'd3'\n\nfunction XPGraph({ increaseXP, filterAudits }) {\n\n    let totalXP = 0;\n    filterAudits.map(project => totalXP += project.amount)\n\n    let XPRef = useRef()\n    XPRef.current = increaseXP;\n\n    const svgRef = useRef()\n    useEffect(() => {\n        // setting up svg\n        const width = 1000;\n        const height = 600;\n        const margin = { top: 50, bottom: 50, left: 50, right: 50 }\n        const Y = d3.map(XPRef.current, d => d.amount);\n        const X = d3.map(XPRef.current, d => d.createdAt)\n\n        const svg = d3.select(svgRef.current)\n            .attr('height', height - margin.top - margin.bottom)\n            .attr('width', width - margin.left - margin.right)\n            .attr('viewBox', [0, 0, width, height])\n\n        const xScale = d3.scaleUtc()\n            .domain(d3.extent(X))\n            .range([margin.left, width - margin.right])\n\n        const yScale = d3.scaleLinear()\n            .domain([0, totalXP])\n            .range([height - margin.bottom, margin.top])\n\n        const scaleLine = d3.line()\n            .x((d, i) => xScale(X[i]))\n            .y(yScale)\n            .curve(d3.curveLinear)\n\n        svg\n            .selectAll('.line')\n            .data([Y])\n            .join('path')\n            .attr('d', d => scaleLine(d))\n            .attr('fill', 'none')\n            .attr('stroke', '#A7727D')\n\n        function yAxis(g) {\n            g.attr('transform', `translate(${margin.left}, 0)`)\n            g.call(d3.axisLeft(yScale))\n        }\n\n        function xAxis(g) {\n            g.attr('transform', `translate(0, ${height - margin.bottom})`)\n                .call(d3.axisBottom(xScale).ticks(width / 80).tickSizeOuter(0))\n        }\n\n        svg.append('g').call(yAxis)\n        svg.append('g').call(xAxis)\n    }, XPRef.current)\n\n\n    return (\n        <div className='line-graph'>\n            <p className='line-graph-title'>XP progression over time</p>\n            <svg ref={svgRef}></svg>\n        </div>\n    )\n}\n\nexport default XPGraph\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}