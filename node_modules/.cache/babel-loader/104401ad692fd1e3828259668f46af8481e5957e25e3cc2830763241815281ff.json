{"ast":null,"code":"import{React,useRef,useEffect}from'react';import*as d3 from'd3';import{jsx as _jsx}from\"react/jsx-runtime\";function TaskGraph(_ref){var filterAudits=_ref.filterAudits;var svg2Ref=useRef();var myRef2=useRef();myRef2.current=filterAudits.sort(function(a,b){return a.amount-b.amount;});useEffect(function(){var width=1000;var height=600;var margin={top:50,bottom:50,left:50,right:50};var Y=d3.map(myRef2.current,function(d){return d.amount;});var X=d3.map(myRef2.current,function(d){return d.object.name;});console.log(X);var svg=d3.select(svg2Ref.current).attr('height',height-margin.top-margin.bottom).attr('width',width-margin.left-margin.right).attr('viewBox',[0,0,width,height]);var xScale=d3.scaleBand().domain(d3.range(myRef2.current.length)).range([margin.left,width-margin.right]).padding(0.1);var yScale=d3.scaleLinear().domain([0,d3.max(Y)]).range([height-margin.bottom,margin.top]);svg.append('g').attr('fill','royalblue').selectAll('rect').data(Y).join('rect').attr('x',function(d,i){return xScale(i);}).attr('y',function(d){return yScale(d);}).attr('height',function(d){return yScale(0)-yScale(d);}).attr('width',xScale.bandwidth());function yAxis(g){g.attr('transform',\"translate(\".concat(margin.left,\", 0)\"));g.call(d3.axisLeft(yScale));}function xAxis(g){g.attr('transform',\"translate(0, \".concat(height-margin.bottom,\")\")).call(d3.axisBottom(xScale).tickFormat(function(i){return X[i];}));}svg.append('g').call(yAxis);svg.append('g').call(xAxis);svg.node();},myRef2.current);return/*#__PURE__*/_jsx(\"div\",{className:\"task-graph\",children:/*#__PURE__*/_jsx(\"svg\",{ref:svg2Ref})});}export default TaskGraph;","map":{"version":3,"names":["React","useRef","useEffect","d3","TaskGraph","filterAudits","svg2Ref","myRef2","current","sort","a","b","amount","width","height","margin","top","bottom","left","right","Y","map","d","X","object","name","console","log","svg","select","attr","xScale","scaleBand","domain","range","length","padding","yScale","scaleLinear","max","append","selectAll","data","join","i","bandwidth","yAxis","g","call","axisLeft","xAxis","axisBottom","tickFormat","node"],"sources":["/home/mannakass/kood/graphql/src/components/TaskGraph.js"],"sourcesContent":["import { React, useRef, useEffect } from 'react'\nimport * as d3 from 'd3'\n\nfunction TaskGraph({ filterAudits }) {\n\n    const svg2Ref = useRef();\n    let myRef2 = useRef()\n    myRef2.current = filterAudits.sort((a, b) => (a.amount) - (b.amount))\n\n    useEffect(() => {\n        const width = 1000;\n        const height = 600;\n        const margin = { top: 50, bottom: 50, left: 50, right: 50 }\n        const Y = d3.map(myRef2.current, d => d.amount);\n        const X = d3.map(myRef2.current, d => d.object.name)\n        console.log(X)\n\n        const svg = d3.select(svg2Ref.current)\n            .attr('height', height - margin.top - margin.bottom)\n            .attr('width', width - margin.left - margin.right)\n            .attr('viewBox', [0, 0, width, height])\n\n\n        const xScale = d3.scaleBand()\n            .domain(d3.range(myRef2.current.length))\n            .range([margin.left, width - margin.right])\n            .padding(0.1)\n\n\n        const yScale = d3.scaleLinear()\n            .domain([0, d3.max(Y)])\n            .range([height - margin.bottom, margin.top])\n\n        svg\n            .append('g')\n            .attr('fill', 'royalblue')\n            .selectAll('rect')\n            .data(Y)\n            .join('rect')\n            .attr('x', (d, i) => xScale(i))\n            .attr('y', (d) => yScale(d))\n            .attr('height', (d) => yScale(0) - yScale(d))\n            .attr('width', xScale.bandwidth())\n\n        function yAxis(g) {\n            g.attr('transform', `translate(${margin.left}, 0)`)\n            g.call(d3.axisLeft(yScale))\n        }\n\n        function xAxis(g) {\n            g.attr('transform', `translate(0, ${height - margin.bottom})`)\n                .call(d3.axisBottom(xScale).tickFormat(i => X[i]))\n        }\n\n        svg.append('g').call(yAxis)\n        svg.append('g').call(xAxis)\n        svg.node()\n    }, myRef2.current)\n\n    return (\n        <div className='task-graph'>\n            <svg ref={svg2Ref}></svg>\n        </div>\n    )\n}\n\nexport default TaskGraph\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}